(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["x-17"],{2300:function(t,e,i){"use strict";var s=i("cbdb"),n=i.n(s);n.a},"2f21":function(t,e,i){"use strict";var s=i("79e5");t.exports=function(t,e){return!!t&&s((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"55dd":function(t,e,i){"use strict";var s=i("5ca1"),n=i("d8e8"),a=i("4bf8"),r=i("79e5"),o=[].sort,c=[1,2,3];s(s.P+s.F*(r((function(){c.sort(void 0)}))||!r((function(){c.sort(null)}))||!i("2f21")(o)),"Array",{sort:function(t){return void 0===t?o.call(a(this)):o.call(a(this),n(t))}})},cbdb:function(t,e,i){},f8ad:function(t,e,i){"use strict";i.r(e);var s,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("dwd-page",{attrs:{"is-header":""},scopedSlots:t._u([{key:"sub-block",fn:function(){return[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isRuleShow,expression:"isRuleShow"}],staticClass:"dwd-popup"},[i("div",{staticClass:"dwd-popup-mask"}),i("div",{staticClass:"dwd-popup-content dwd-popup--center rule-popup-conent",class:{show:t.isRuleShow}},[i("div",{staticClass:"rule-title"},[t._v("好会员使用规则")]),i("div",{staticClass:"rule-conent"},[i("div",{staticClass:"rule-html",domProps:{innerHTML:t._s(t.tips)}})]),i("div",{staticClass:"rule-tel"},[t._v("如有疑问请联系客服："),i("a",{attrs:{href:"tel:4001858058"}},[t._v("400-1858058")])]),i("div",{staticClass:"rule-btn",on:{click:function(e){t.isRuleShow=!1}}},[t._v("我知道了")])])])]},proxy:!0}])},[i("div",{staticClass:"member-header"},[i("div",{staticClass:"member-card"},[i("div",{staticClass:"user-info"},[i("div",{staticClass:"user-pic"},[i("img",{attrs:{src:t.userCardInfo.avatar,alt:""}})]),i("div",{staticClass:"user-detail"},[i("p",{staticClass:"ellipsis user-name"},[t._v(t._s(t.userCardInfo.username))]),i("div",{staticClass:"vip-end-time"},[i("span",[t._v(t._s(t.userCardInfo.expire_date))]),i("i",{staticClass:"vip-rule",on:{click:function(e){t.isRuleShow=!0}}})])])]),i("div",{staticClass:"renewalfee-entr-btn",on:{click:t.gotoRenewalfee}},[t._v("立即续费")]),i("div",{staticClass:"member-status"},[i("div",{staticClass:"member-status-item",on:{click:function(e){return t.anchorPointEvent({modules_id:"one-module"})}}},[i("span",[t._v(t._s(t.userCardInfo.coupon_num)+"张")]),i("p",[i("em",[t._v(t._s(t.userCardInfo.coupon_num_text))]),i("i",{staticClass:"left-arrow"})])]),i("div",{staticClass:"member-status-item"},[i("span",[t._v(t._s(t.userCardInfo.total_discount_amount)+"元")]),i("p",[t._v("累计已省")])])])])]),i("div",{staticClass:"privilege-box"},[i("div",{ref:"fixedLabel",staticClass:"privilege-content",class:{"is-fixed":t.isFiexd}},[i("div",{staticClass:"privilege-list"},t._l(t.recommendList,(function(e,s){return i("div",{key:s,staticClass:"privilege-item",on:{click:function(i){return t.anchorPointEvent(e)}}},[i("div",{staticClass:"privilege-icon jzimg"},[i("img",{attrs:{src:e.logo,alt:""}})]),i("div",{staticClass:"ellipsis privilege-name"},[t._v(t._s(e.tag_name))]),t.currentModuleId==e.modules_id?i("div",{staticClass:"privilege-tag"}):t._e()])})),0)])]),t._l(t.gftList,(function(e,s){return[i("div",{key:e.item_name+s,staticClass:"rights-list-header"},[0==s?i("div",{ref:"one-module",refInFor:!0,staticClass:"rights-title"},[i("p",[t._v("每天领神券")]),i("span",[t._v("领神券购物更便宜")])]):t._e(),i("div",{staticClass:"rights-tip"},[i("dwd-icon",{attrs:{type:"laba",size:"18"}}),i("p",[t._v("每期领神券，花掉即赚本钱")])],1)]),i("div",{key:e.user_benefit_Id,staticClass:"rights-coupon-box"},[i("div",{staticClass:"rights-item"},[i("div",{staticClass:"rights-cycle-header"},[i("div",{staticClass:"rights-cycle-list"},t._l(e.list,(function(s,n){return i("div",{key:s.title,staticClass:"cycle-item",class:{active:e.currentIndex==n},on:{click:function(i){return t.rightsTabBtnEvent(e,n)}}},[i("div",{staticClass:"cycle-item-content"},[i("span",[t._v(t._s(s.title))]),i("i",{class:{cur:e.currentIndex==n&&1==s.cycleStatus.code}},[t._v(t._s(s.cycleStatus.text))])])])})),0)]),i("div",{staticClass:"rights-coupon-list"},[i("div",{staticClass:"rights-coupon-item"},[i("div",{staticClass:"rights-coupon-tip",domProps:{innerHTML:t._s(e.list[e.currentIndex].tipText)}}),i("div",{staticClass:"rights-coupon-content"},t._l(e.list[e.currentIndex].list,(function(s){return i("div",{key:s.coupon_code,staticClass:"coupon-item",class:{invalid:2==s.status.statusCode},on:{click:function(i){return t.receiveCouponEvent(s,e)}}},[i("div",{staticClass:"coupon-left"},[i("p",{staticClass:"coupon-price"},[t._v("¥"),i("em",[t._v(t._s(s.valueText))])]),i("span",{staticClass:"coupon-sub"},[t._v(t._s(s.at_least_title))])]),i("div",{staticClass:"coupon-right"},[t._v(t._s(s.status.statusText))])])})),0)])])])])]})),t._l(t.modulesList,(function(t){return i("div",{key:t.id,staticClass:"tpl-modules",attrs:{"data-type":t.type}},[i("dwd-modules",{ref:t.id,refInFor:!0,attrs:{data:t}})],1)}))],2)},a=[],r=(i("8e6e"),i("ac6a"),i("456d"),i("55dd"),i("c5f6"),i("bd86")),o=(i("7f7f"),i("79bb")),c=i("1172"),l=i("42a5"),d=i("ed08"),u=i("2ddd"),v=i("2eba"),p=i("32ea");function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(i,!0).forEach((function(e){Object(r["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var m={components:(s={},Object(r["a"])(s,o["b"].name,o["b"]),Object(r["a"])(s,v["a"].name,v["a"]),s),data:function(){return{isFiexd:!1,isRuleShow:!1,userCardInfo:{},currentModuleId:"one-module",recommendList:[],gftList:[],modulesList:[],tips:""}},created:function(){this.getMemberCenterData(),bridge.hsq&&bridge.onPageShow({success:function(t){this.getMemberCenterData()}})},mounted:function(){this.scroller=c["a"].getScrollEventTarget(document.getElementById("content")),this.handlerScroll(!0);var t=this.$refs.fixedLabel.getBoundingClientRect();this.fixedLabel={top:t.top,height:t.height};var e=this.$children[0].$refs.header;e&&(this.headerObj=e.$el.getBoundingClientRect(),this.fixedLabel.top=this.fixedLabel.top-this.headerObj.height)},destroyed:function(){this.handlerScroll(!1)},beforeDestroy:function(){device.hsq&&bridge.offPageShow({})},activated:function(){this.handlerScroll(!0)},deactivated:function(){this.handlerScroll(!1)},methods:f({},p["a"],{gotoRenewalfee:function(){this.$forward("member-open",{type:2,open_tag:1})},receiveCouponEvent:function(t,e){var i=this;if(0==t.status.statusCode){var s={serialNo:this.userCardInfo.center_request_no,benefitId:e.user_benefit_Id,activityCode:t.reward_code};this.$api.receiveMemberCoupon(s,(function(e){if(i.$showToast("优惠券领取成功，快去使用吧！"),!t.is_allow_repeat_exchange){var s={statusText:"已领取",statusCode:1};i.$set(t,"status",s)}}),(function(t){}))}},anchorPointEvent:function(t){var e=this.anchorPoint[t.modules_id];e&&e.top&&(this.currentModuleId=t.modules_id,c["a"].setScrollTop(this.scroller,e.top))},rightsTabBtnEvent:function(t,e){this.$set(t,"currentIndex",e)},handlerScroll:function(t){(t?l["b"]:l["a"])(this.scroller,"scroll",this.onScroll)},onScroll:function(){var t=this.scroller,e=c["a"].getVisibleHeight(t);if(e){var i=c["a"].getScrollTop(t);i>this.fixedLabel.top?this.isFiexd||(this.isFiexd=!0):this.isFiexd&&(this.isFiexd=!1),this.selectAnchorPointItem(i)}},selectAnchorPointItem:function(t){for(var e=this.currentModuleId,i=0;i<this.anchorPointArray.length;i++){var s=this.anchorPointArray[i],n=this.anchorPointArray[i+1];if(t>s.top&&t<n.top){e=s.modules_id;break}}e!==this.currentModuleId&&(this.currentModuleId=e)},getMemberCenterData:function(){var t=this;this.$api.getMemberCenter({},(function(e){var i=e.data,s=i.topic_id,n=void 0===s?0:s,a=i.user_info,r=void 0===a?{}:a,o=i.list,c=void 0===o?[]:o,l=i.recommend_list,u=void 0===l?[]:l,v=i.tips,p=void 0===v?"":v;p&&(t.tips=p),t.timestamp=e.timestamp;var h=r.can_receive_coupon_num,m="待领券";0==h&&(h=r.received_coupon_num,m="已领券"),t.userCardInfo=f({},r,{coupon_num:h,coupon_num_text:m,expire_date:r.expire_date,total_discount_amount:Object(d["a"])(r.total_discount_amount||"0")});var _={};t.recommendList=(u||[]).map((function(t,e){return 0==e&&(_["one-module"]={}),t.modules_id&&0!=e&&(_[t.modules_id]={}),f({},t,{modules_id:0==e?"one-module":t.modules_id})})),t.anchorPoint=_;1==r.agreement_status&&c.gift_list;var g={};g=1==r.agreement_status?t.dealRightsListData(c):t.dealNotOpenRightsListData(c),t.gftList=g.list;var b=t;t.$nextTick((function(){b.dealModuleRefs()})),n&&(t.topic_id=n,t.gettopic())}))},dealNotOpenRightsListData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.dealRightsListData(t);return{list:e.list}},dealRightsListData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=["领取","已领取","已过期","待生效"],s=(e||[]).map((function(e,s){var n=0,a=(e.list||[]).map((function(e,s){e.is_current&&(n=s);var a={text:"",code:0},r="",o=e.end_time,c=void 0===o?0:o,l=e.start_time,v=void 0===l?0:l;if(t.timestamp>c)a.text="已结束",a.code=3,r="".concat(e.title,"领券时间已截止");else if(t.timestamp<v){a.text="待开放",a.code=2;var p=v-t.timestamp,h=Object(u["c"])(1e3*p,"d");p%86400&&(h=Number(h)+1),r="距离".concat(e.title,"神券开放领取还有<em>").concat(h,"</em>天")}else{a.text="可领券",a.code=1;var m=c-t.timestamp,_=Object(u["c"])(1e3*m,"d");m%86400&&(_=Number(_)+1),r="本期领券时间剩余<em>".concat(_,"</em>天")}1!==t.userCardInfo.agreement_status&&(a.text="待开放",a.code=2,r="需续费后才生效哦~");var g=(e.list||[]).map((function(t,e){var s=null!=t.status?t.status:3;return f({},t,{valueText:Object(d["a"])(t.value,100,!1),status:{statusCode:s,statusText:i[s]}})}));return f({},e,{list:g,tipText:r,cycleStatus:a})}));return f({},e,{list:a,currentIndex:n})}));return{list:s}},gettopic:function(){var t=this;this.$api.getNewTopicInfo({code:this.topic_id},(function(e){t.modulesList=t.dealModuleList(e.data.list);var i=t;t.$nextTick((function(){i.dealModuleRefs()}))}),(function(t){return!0}))},dealModuleRefs:function(){for(var t in this.anchorPointArray=[],this.anchorPoint){var e=this.$refs[t];if(e){Object(u["e"])(e)&&(e=this.$refs[t][0],e._isVue&&(e=e.$el));var i=e.getBoundingClientRect()||{top:0},s=i.top-this.fixedLabel.height-(this.headerObj&&this.headerObj.height||0),n={top:Math.round(s),modules_id:t};this.anchorPoint[t]=n,this.anchorPointArray.push(n)}}this.anchorPointArray.sort((function(t,e){return t.top-e.top}))}})},_=m,g=(i("2300"),i("2877")),b=Object(g["a"])(_,n,a,!1,null,"9588dc46",null);e["default"]=b.exports}}]);