(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["x-14"],{"2f21":function(t,e,i){"use strict";var s=i("79e5");t.exports=function(t,e){return!!t&&s((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"426c":function(t,e,i){"use strict";var s=i("f294"),a=i.n(s);a.a},"55dd":function(t,e,i){"use strict";var s=i("5ca1"),a=i("d8e8"),n=i("4bf8"),c=i("79e5"),r=[].sort,o=[1,2,3];s(s.P+s.F*(c((function(){o.sort(void 0)}))||!c((function(){o.sort(null)}))||!i("2f21")(r)),"Array",{sort:function(t){return void 0===t?r.call(n(this)):r.call(n(this),a(t))}})},"56ba":function(t,e,i){},"7b94":function(t,e,i){"use strict";i.r(e);var s,a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("dwd-page",{staticClass:"page-detail2",scopedSlots:t._u([{key:"sub-block",fn:function(){return[s("promotion-card",{directives:[{name:"show",rawName:"v-show",value:t.proStatus,expression:"proStatus"}],attrs:{promotions:t.promotions,"promotion-title":"促销信息"},on:{handlePromotion:t.handlePromotion}}),s("dwd-sku-select",{attrs:{"norm-select-tag":t.normSelectTag,"sku-btn-status":t.skuBtnStatus,"attr-list":t.attrList,"sku-stocks-list":t.skuStocksList,"small-current-sku-data":t.smallCurrentSkuData,"max-buy-sum":t.maxBuySum,"current-sum":t.currentSum},on:{onSetParentData:t.onSetParentData,onBtnClick:t.onBtnClick},model:{value:t.isShowPopup,callback:function(e){t.isShowPopup=e},expression:"isShowPopup"}}),s("select-city",{attrs:{"did-show-city-selection":t.didShowCitySelection},on:{"update:didShowCitySelection":function(e){t.didShowCitySelection=e},"update:did-show-city-selection":function(e){t.didShowCitySelection=e},selectingNewCity:t.selectingNewCity}})]},proxy:!0}])},[s("div",{staticClass:"header",style:t.headerStyle},[s("div",{staticClass:"icon left-box",on:{click:function(e){return t.goNext("back")}}},[s("img",{staticClass:"left-arrow",attrs:{src:i("6fac")}})]),s("div",{staticClass:"middle-text"}),t.isGat?s("div",{staticClass:"icon right-box",on:{click:function(e){return t.goNext("index")}}},[s("img",{staticClass:"left-arrow",attrs:{src:i("dbef")}})]):t._e()]),s("dwd-swiper",{attrs:{ratio:t.ratio,speed:500,auto:3e3,"default-index":0,continuous:!0,"show-indicators":!0},on:{change:t.handleChange}},t._l(t.swiperList,(function(t,e){return s("dwd-swiper-item",{key:e,staticClass:"swiper-block"},[s("img",{staticClass:"swiper-image",attrs:{src:t,alt:""}})])})),1),t.showAct&&"start"==t.activityPreheat.activityStatus?s("div",{staticClass:"activity-block",class:["start"==t.activityPreheat.activityStatus?"activity-block-active":""]},[t.activityPreheat.activityStock<1&&t.descData.left_stock<1?s("div",{staticClass:"activity-no-stock"},[s("img",{attrs:{src:"https://img1.haoshiqi.net/miniapp/img/sold_a64f1921fd.png"}})]):t._e(),s("div",{staticClass:"act-left"},[s("div",{staticClass:"act-left-left"},[s("div",{staticClass:"act-icon-box"},[s("div",{staticClass:"icon-box"},[s("img",{staticClass:"act-icon",attrs:{src:i("f3b7")}})]),s("span",{staticClass:"text-right"},[t._v("\n            "+t._s(1==t.activityPreheat.activityType?"活动价":"秒杀价")+"\n          ")])]),s("div",{staticClass:"act-left-right"},[s("div",{staticClass:"act-ac-price"},[t._v("\n            ￥"+t._s(t.activityPreheat.price[0])+"."+t._s(t.activityPreheat.price[1])+"\n          ")]),s("div",{staticClass:"act-mark-price"},[t._v("￥"+t._s(t.activityPreheat.activityMarketPrice))])]),"end"!=t.activityPreheat.activityStatus?s("div",{staticClass:"act-inventory-box"},[s("div",{staticClass:"act-stock"},[s("span",[t._v(t._s("start"==t.activityPreheat.activityStatus?"仅剩":"限量"))]),t._v(t._s(t.activityPreheat.activityStock)+"件\n          ")]),"start"==t.activityPreheat.activityStatus?s("div",{staticClass:"act-stock-rate"},[s("div",{staticClass:"act-rate-box",style:{width:t.activityPreheat.rateNumber+"%"}})]):t._e()]):t._e()])]),s("div",{staticClass:"act-right"},[s("div",{staticClass:"act-right-top",class:["start"==t.activityPreheat.activityStatus?"activity-block-text":""]},[t._v("\n        "+t._s(t.activityPreheat.activityCountTip)+"\n      ")]),s("div",{staticClass:"act-countdown"},[t.activityPreheat.activityTime.days>0?s("div",{staticClass:"count-number-day",class:["start"==t.activityPreheat.activityStatus?"activity-block-text":""]},[t._v("\n          "+t._s(t.activityPreheat.activityTime.days)+"天\n        ")]):t._e(),t._v("\n        :\n        "),s("div",{staticClass:"count-number",class:["start"==t.activityPreheat.activityStatus?"activity-block-bg":""]},[t._v("\n          "+t._s(t.activityPreheat.activityTime.hours)+"\n        ")]),t._v("\n        :\n        "),s("div",{staticClass:"count-number",class:["start"==t.activityPreheat.activityStatus?"activity-block-bg":""]},[t._v("\n          "+t._s(t.activityPreheat.activityTime.minutes)+"\n        ")]),t._v("\n        :\n        "),s("div",{staticClass:"count-number",class:["start"==t.activityPreheat.activityStatus?"activity-block-bg":""]},[t._v("\n          "+t._s(t.activityPreheat.activityTime.seconds)+"\n        ")])])])]):t._e(),s("div",{staticClass:"info"},[t.showAct&&"ready"!=t.activityPreheat.activityStatus?t._e():s("div",{staticClass:"mt price-box"},[s("span",{staticClass:"item item-rmb"},[t._v("\n        "+t._s(t.priceObj.price)+"\n      ")]),s("span",{staticClass:"item item-market-price"},[t._v("\n        "+t._s(t.priceObj.marketPrice)+"\n      ")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:"ready"==t.activityPreheat.activityStatus&&t.descData.left_stock>0,expression:"activityPreheat.activityStatus == 'ready' && descData.left_stock > 0"}],staticClass:"mt seckill max-line-1"},[s("span",{staticClass:"title-border"},[t._v(t._s(1==t.activityPreheat.activityType?"活动预告":"秒杀预告")+"\n      ")]),t._v("\n      "+t._s(t.activityPreheat.activityStartTimeTip)+"\n      "+t._s(1==t.activityPreheat.activityType?"活动价":"秒杀价")+"￥"+t._s((t.activityPreheat.activityPrice/100).toFixed(2))+"\n    ")]),s("div",{staticClass:"mt info-title max-line-2"},[2==t.merchantInfo.merchantType?s("span",{staticClass:"title-zy"},[t._v("自营")]):t._e(),t._v("\n      "+t._s(t.merchantInfo.name)+"\n    ")]),s("div",{staticClass:"mt info-desc"},[t._v("\n      "+t._s(t.merchantInfo.desc)+"\n    ")])]),t.promotions.length?s("div",{staticClass:"attrs mt",on:{click:t.handlePromotion}},[s("div",{staticClass:"title"},[t._v("促销")]),s("div",{staticClass:"promotions"},t._l(t.promotions,(function(e,i){return s("div",{key:i,staticClass:"promotions-item"},[s("span",{staticClass:"promotions-title"},[t._v(t._s(e.title))]),s("span",{staticClass:"promotions-text"},[t._v(t._s(e.text))])])})),0),s("img",{staticClass:"more",attrs:{src:"https://img1.haoshiqi.net/miniapp/more_85508a3b09.png"}})]):t._e(),s("div",{staticClass:"attr-text mt"},[s("span",{staticClass:"title"},[t._v("已选")]),s("div",{staticClass:"params-box"},[t.notSelectedAttrName?s("p",[t._v("请选择: "+t._s(t.notSelectedAttrName))]):s("p",[t._l(t.selectedAttrName,(function(e,i){return[t._v("\n          "+t._s(0!==i?"、":"")+"【"+t._s(e.attr_name)+"】"+t._s(e.value)+t._s(2==e.type?"到期":"")+"\n        ")]}))],2)])]),s("div",{staticClass:"mt city",on:{click:t.onSelectCity}},[s("div",{staticClass:"city-front"},[s("label",{staticClass:"city-label"},[t._v("送至：")]),s("img",{staticClass:"city-img",attrs:{src:"https://img1.haoshiqi.net/miniapp/address/location_e7c4dc70ce.png"}}),s("div",{staticClass:"city-name"},[t._v(t._s(t.currentCity.currentAddress))]),s("img",{staticClass:"city-arrow",attrs:{src:"https://img1.haoshiqi.net/wxapp/img/more_85508a3b09.png"}})])]),s("div",{staticClass:"white-bg"},[s("div",{staticClass:"city white-bg city-cost"},[s("label",{staticClass:"city-label"},[t._v("运费：")]),s("div",{staticClass:"city-name",class:{"cannot-delivery":!t.merchantInfo.canDelivery}},[t._v(t._s(t.merchantInfo.freightInfo))])])]),s("div",{staticClass:"store"},[t.isGat?s("div",{staticClass:"store-box",on:{click:function(e){return t.goMerchant(t.merchantData.id)}}},[s("div",{staticClass:"store-info"},[s("img",{staticClass:"store-img",attrs:{src:t.merchantData.logo}}),s("div",{staticClass:"store-text"},[s("div",{staticClass:"store-title"},[t._v(t._s(t.merchantData.name))])])])]):t._e()]),s("div",{staticClass:"mt padding-bg"},[s("div",{staticClass:"sec-head-box"},[s("div",{staticClass:"sec-head"},[t._v("商品详情")])]),s("div",{staticClass:"detail-tap",domProps:{innerHTML:t._s(t.detailHtml)}}),s("div",{staticClass:"sec-head-box"},[s("div",{staticClass:"sec-head"},[t._v("服务保障")])]),s("ul",{staticClass:"detail-service",staticStyle:{"border-top":"0"}},[s("li",[s("b",[t._v("100%正品")]),s("span",[t._v("所有商家均经过严格资质审核，请放心购买")])]),s("li",[s("b",[t._v("售后保障")]),s("span",[t._v("商品存在质量问题，可立即申请退款"),s("br"),t._v("质量问题包括：保质期不符、食品损坏、变质等")])]),s("li",[s("b",[t._v("发货承诺")]),s("span",[t._v("商家将在承诺时间内发货"),s("br"),t._v("（每个商家承诺时间不同，具体请在商品详情页查看)")])]),s("li",[s("b",[t._v("PICC安全保障")]),s("span",[t._v("您购买的每一件商品都由中国人民保险集团股份有限公司（PICC）为您承保")])]),s("li",[s("b",[t._v("标示价格说明")]),s("span",[t._v("被划去的“价格”指同品牌同种等量规格的商品在国内大陆地区主流电商平台，但不仅限于电商平台上的标示价格、或厂家、供应商的指导价；商品实际售价为本平台实时销售价格")])]),s("span",{staticClass:"footer-txt"},[t._v("已经达到底部啦~")])])]),s("div",{staticClass:"flex-grid buy-bar"},[s("div",{staticClass:"flex-grid-cell u-2of0 buy-media",on:{click:function(e){return t.goNext("service")}}},[s("img",{staticClass:"icon",attrs:{src:i("d099")}}),s("div",{staticClass:"text"},[t._v("客服")])]),t.isGat?s("div",{staticClass:"flex-grid-cell u-2of0 buy-media",on:{click:function(e){return t.goMerchant(t.merchantData.id)}}},[s("img",{staticClass:"icon icon-merchant",attrs:{src:i("8ad4")}}),s("div",{staticClass:"text"},[t._v("店铺")])]):t._e(),"ready"!==t.activityPreheat.activityStatus||t.descData.left_stock>0?s("div",{staticClass:"flex-grid-cell  btn-buy-commit",class:[t.skuBtnStatus.isBtnActive?"active":""],on:{click:t.goBuyCommit}},[t._v("\n      立即购买\n    ")]):s("div",{staticClass:"flex-grid-cell activity-ready"},[s("div",{staticClass:"activity-price"},[t._v("\n        "+t._s(1==t.activityPreheat.activityType?"活动价":"秒杀价")+"￥"+t._s((t.activityPreheat.activityPrice/100).toFixed(2))+"\n      ")]),s("div",{staticClass:"activity-time"},[t._v("\n        "+t._s(t.activityPreheat.activityStartTimeTip)+"\n      ")])])]),s("img",{staticClass:"back-top",class:{topImg:t.topStatus},attrs:{src:i("5ec7")},on:{click:t.backTop}})],1)},n=[],c=(i("8e6e"),i("ac6a"),i("456d"),i("a481"),i("28a5"),i("7514"),i("96cf"),i("3b8d")),r=i("bd86"),o=(i("7f7f"),i("79bb")),l=i("4183"),d=i("9377"),u=i.n(d),v=i("ed08"),h=(i("365c"),i("2ddd")),p=i("2f62"),m=i("51be"),f=i("4f9d"),y=i("a499"),_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"promotios"},[t.promotions.length?i("div",{staticClass:"new-mask",on:{click:function(e){return t.handlePromotion("close")}}}):t._e(),i("div",{staticClass:"new-container new-container-ani"},[i("div",{staticClass:"container-title"},[t._v(t._s(t.promotionTitle?t.promotionTitle:"优惠信息"))]),i("div",{staticClass:"container-content"},t._l(t.promotions,(function(e,s){return i("div",{key:s,staticClass:"container-content-item"},[i("div",{staticClass:"title"},[t._v(t._s(e.title))]),t.type?i("div",{staticClass:"desc"},t._l(e.text,(function(e,s){return i("span",{key:s},[i("span",[t._v(t._s(e.first))]),i("span",[t._v(t._s(e.second))]),e.text.length-1!==s?i("span",[t._v(",")]):t._e()])})),0):i("div",{staticClass:"desc"},[t._v(t._s(e.text))])])})),0),i("div",{staticClass:"btn-know",on:{click:function(e){return t.handlePromotion("close")}}},[t._v("确认")])])])},b=[],C={props:{promotions:{type:Array,require:!0},promotionTitle:{type:String,require:!1},type:{type:Boolean,require:!1,default:!1}},data:function(){return{}},created:function(){},methods:{handlePromotion:function(t){this.$emit("handlePromotion",{type:t})}}},k=C,g=(i("cd36"),i("2877")),S=Object(g["a"])(k,_,b,!1,null,"11c0d0d6",null),w=S.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isPopupShow?i("div",{staticClass:"sku-select-popup"},[i("div",{staticClass:"popup-mask",on:{click:function(e){return t.$emit("input",!1)}}}),i("div",{staticClass:"sku-select-content"},[i("div",{staticClass:"product-complex"},[i("div",{staticClass:"sku-img"},[i("img",{attrs:{src:t.currentSkuData.thumbnail,alt:""}})]),i("div",{staticClass:"complex-info"},[i("p",{staticClass:"sku-price"},[t._v("¥"+t._s(t.smallCurrentSkuData.priceText||t.currentSkuData.priceText))]),i("p",{staticClass:"sku-info"},[t._v("库存: "+t._s(t.currentSkuData.left_stock)+"件")]),t.notSelectedAttrName?t._e():i("p",{staticClass:"sku-info"},[t._v("商品编号: "+t._s(t.currentSkuData.skuid))])]),i("dwd-icon",{staticClass:"sku-close",attrs:{type:"close",size:"18",color:"#666"},nativeOn:{click:function(e){return t.$emit("input",!1)}}})],1),i("div",{staticClass:"sku-warp"},[t._l(t.attrData,(function(e,s){return i("div",{key:e.attr_id,staticClass:"sku-group"},[i("div",{staticClass:"sku-group-name"},[t._v("\n          "+t._s(e.attr_name)+":"),e.active?t._e():i("span",[t._v("请选择"+t._s(e.attr_name))])]),i("div",{staticClass:"sku-option"},t._l(e.list,(function(e,a){return i("span",{key:e.ids,staticClass:"sku-item",class:{active:e.active,disabled:e.disabled},attrs:{"data-index":a,"data-parent-index":s,"data-disabled":e.disabled},on:{click:function(e){return e.stopPropagation(),t.attrSelect(e)}}},[t._v(t._s(e.value))])})),0)])})),i("div",{staticClass:"sku-group sum-select"},[i("div",{staticClass:"sku-group-name"},[t._v("数量:")]),i("dwd-input-number",{attrs:{value:t.currentSum,max:4},on:{onchange:t.countChangeVal}})],1)],2),i("div",{staticClass:"btns-group"},[0==t.normSelectTag||1==t.normSelectTag?i("div",{staticClass:"btn add-cart",class:{active:t.skuBtnStatus.isBtnActive},attrs:{"data-type":"addShoppingCart"},on:{click:t.footerBtnClick}},[t._v("\n        "+t._s(t.skuBtnStatus.cartBtnText)+"\n      ")]):t._e(),0==t.normSelectTag||2==t.normSelectTag?i("div",{staticClass:"btn buy-btn",class:{active:t.skuBtnStatus.isBtnActive},attrs:{"data-type":"buyBtn"},on:{click:t.footerBtnClick}},[t._v("\n        "+t._s(t.skuBtnStatus.buyBtnText)+"\n      ")]):t._e()])])]):t._e()},x=[],D=(i("aef6"),i("55dd"),i("6762"),i("2fdb"),i("c5f6"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"input-number",class:t.inputNumberClass},[i("div",{staticClass:"btn-less",on:{click:function(e){return e.stopPropagation(),t.clickEvent(0)}}}),i("input",{ref:t.refId,staticClass:"input-bar",attrs:{type:"number"},domProps:{value:t.num},on:{keyup:t.inputChange,blur:t.onBlur}}),i("div",{staticClass:"btn-add",on:{click:function(e){return e.stopPropagation(),t.clickEvent(1)}}})])}),O=[],A={name:"dwd-input-number",props:{value:{type:Number,default:1},min:{type:Number,default:1},max:{type:Number,default:0},size:{type:String,default:"normal"},styleType:{type:String,default:"not-border"},disabled:{type:Boolean,default:!1}},data:function(){return{num:1}},computed:{inputNumberClass:function(){return"nput-number-".concat(this.size," input-number-").concat(this.styleType," ").concat(this.disabled?"disabled":"")},refId:function(){return"inputNumber_"+this._uid}},watch:{value:function(t,e){this.num=t}},created:function(){},methods:{inputChange:function(t){var e=+t.key;isNaN(e)||this.delNum(e)},delNum:function(t){t>this.num?this.max>0&&t>this.max&&(t=this.max,this.$showToast("最多只能买".concat(this.max,"件哦！"))):this.min>0&&t<this.min&&(t=this.min,this.$showToast("最少买".concat(this.min,"件哦！"))),t==this.num?this.$refs[this.refId].value=t:(this.num=t,this.$emit("onchange",{value:t}))},clickEvent:function(t){1==t?this.delNum(this.num+1):this.delNum(this.num-1)},onBlur:function(t){var e=t.target.value;e||(e==this.num?t.target.value=this.num:this.delNum(e))}}},T=A,I=(i("e716"),Object(g["a"])(T,D,O,!1,null,"fc00fd26",null)),j=I.exports,$={name:"dwd-sku-select",components:(s={},Object(r["a"])(s,o["b"].name,o["b"]),Object(r["a"])(s,j.name,j),s),model:{prop:"isPopupShow"},props:{isPopupShow:{type:Boolean,default:!1},normSelectTag:{type:Number,default:0},currentSum:{type:Number,default:1},attrList:{type:Array,default:function(){return[]}},skuStocksList:{type:Object,default:function(){return{}}},smallCurrentSkuData:{type:Object,value:{priceText:0}},skuBtnStatus:{type:Object,value:{isBtnActive:!0,buyBtnText:"确认",cartBtnText:"确认"}},maxBuySum:{type:Number,value:100}},data:function(){return{notSelectedAttrName:"",selectedAttrName:[],currentSkuData:{},attrData:[]}},watch:{skuStocksList:function(t,e){Object(h["f"])(t)&&this.$nextTick((function(){this.initSku()}))}},beforeCreate:function(){this.__data={attrMap:{},cachedSkuList:{},selectdSkuAttrData:[]}},created:function(){},methods:{countChangeVal:function(t){var e=t.value,i=void 0===e?1:e;this.$emit("onSetParentData",{currentSum:i})},footerBtnClick:function(t){var e=t.currentTarget.dataset.type;this.skuBtnStatus.isBtnActive&&(""==this.notSelectedAttrName?this.$emit("onBtnClick",{type:e}):this.$showToast("请选择规格"))},attrSelect:function(t){var e=t.currentTarget.dataset,i=e.parentIndex,s=e.index,a=e.disabled,n=void 0!==a&&a,c=this.attrData,r=void 0===c?[]:c;if(!n){var o=r[i]||{},l=o.list&&o.list[s]||"";if(!l)return;var d=this.getIsSelectAttr(o.attr_id,l);d?delete this.__data.selectdSkuAttrData[o.attr_id]:(this.__data.selectdSkuAttrData[o.attr_id]&&delete this.__data.selectdSkuAttrData[o.attr_id],this.__data.selectdSkuAttrData[o.attr_id]={attr_id:o.attr_id,attr_name:o.attr_name,ids:l.ids,value:l.value}),this.dealNewAttr(),this.getSelectdAttrSkuId(),this.setNotOrSelectedAttrName()}},dealNewAttr:function(){for(var t=this.attrData,e=void 0===t?[]:t,i=this.__data,s=i.selectdSkuAttrData,a=void 0===s?{}:s,n=i.cachedSkuList,c=void 0===n?{}:n,r=Object.keys(a),o=Object.keys(c),l=0;l<e.length;l++){var d=e[l];a[d.attr_id]?this.$set(d,"active",!0):delete d.active;for(var u=0;u<d.list.length;u++){var v=d.list[u];if(r.length){var p=this.getIsSelectAttr(d.attr_id,v);if(p)this.$set(v,"active",!0);else{delete v.active;var m=!0,f=Object(h["a"])(a);f[e[l].attr_id]={attr_id:d.attr_id,attr_name:d.attr_name,ids:v.ids,value:v.value};var y=this.getSelectAttrValue(f);y=y.join(";"),c[y]&&(m=!1),m?v.disabled=!0:delete v.disabled}}else{delete v.active;for(var _=!0,b=0;b<o.length;b++){var C=o[b];if(C.includes(v.value)){_=!1;break}}_?v.disabled=!0:delete v.disabled}}}this.attrData=e},getSelectAttrValue:function(t){var e=Object.keys(t);e.sort((function(t,e){return parseInt(t)-parseInt(e)}));for(var i=[],s=0;s<e.length;s++){var a=e[s];i.push(t[a].value)}return i},getSelectdAttrSkuId:function(){var t=this.__data.selectdSkuAttrData,e=void 0===t?{}:t,i=this.currentSkuData,s=void 0===i?{}:i,a=this.attrData,n=void 0===a?[]:a,c=Object.keys(e);if(c.length&&c.length===n.length){var r=this.getSelectAttrValue(this.__data.selectdSkuAttrData);r=r.join(";");var o=this.__data.cachedSkuList[r],l=this.skuStocksList[o]||{};l.skuid&&s&&s.skuid===l.skuid||(this.currentSkuData=l,this.$emit("onSetParentData",{currentSkuData:l}))}},setNotOrSelectedAttrName:function(){for(var t=this.__data.selectdSkuAttrData,e=void 0===t?{}:t,i=this.attrData,s=void 0===i?[]:i,a="",n=[],c=0;c<s.length;c++){var r=s[c];e[r.attr_id]?n.push({type:"保质期"==r.attr_name?2:1,attr_name:r.attr_name,value:e[r.attr_id].value}):a+=" "+r.attr_name}this.notSelectedAttrName=a,this.selectedAttrName=n,this.$emit("onSetParentData",{notSelectedAttrName:a,selectedAttrName:n})},getIsSelectAttr:function(t,e){var i=this.__data.selectdSkuAttrData,s=void 0===i?{}:i,a=s[t]||{};return a.value==e.value},initSku:function(){for(var t=this.attrList,e=void 0===t?[]:t,i=this.skuStocksList,s=void 0===i?{}:i,a={},n={},c={},r=[],o=0;o<e.length;o++){var l=e[o];if(l&&l.list){var d={};d["attr_id"]=o,d["attr_name"]=l.name,d["list"]=[];var u={};if(l.name){u["attr_id"]=d["attr_id"],u["attr_name"]=l.name,u["value"]=l.defaultAttr||l.default_attr;for(var v=0;v<l.list.length;v++){var h=l.list[v];for(var p in h)u["value"]==p&&(u["ids"]=h[p])}}c[d["attr_id"]]=u;for(var m=0;m<l.list.length;m++){var f=l.list[m];for(var y in f)d["list"].push({ids:f[y],value:y}),a[f[y]]=y}r.push(d)}}for(var _ in s){for(var b=_.split(";"),C=[],k=0;k<b.length;k++){var g=S(b[k]);g&&C.push(g+"")}w("",0,C,_,n)}function S(t){for(var e in a)if(e.includes(t))return a[e];return null}function w(t,e,i,s,a){if(e!=i.length)for(var n=e;n<i.length;n++){t&&!t.endsWith(";")&&(t+=";");var c=t+i[n];a[c]=s,e++,w(c,e,i,s,a)}}this.__data.attrMap=a,this.__data.selectdSkuAttrData=c,this.__data.cachedSkuList=n,this.attrData=r,this.getSelectdAttrSkuId(),this.setNotOrSelectedAttrName(),this.dealNewAttr()}}},N=$,B=(i("876d"),Object(g["a"])(N,P,x,!1,null,"5ed5624c",null)),L=B.exports,E={methods:{onSetParentData:function(t){var e=t.currentSkuData;if(e){var i=this.currentSkuData;i.skuid&&e.skuid&&e.skuid!==i.skuid&&this.skuDataOnChange&&this.skuDataOnChange(e)}for(var s in t)this[s]=t[s]}}},M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.didShowCitySelection,expression:"didShowCitySelection"}],staticClass:"city-view"},[i("div",{staticClass:"transparent",on:{click:t.onCityView}}),i("div",{staticClass:"city-view-title"},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.showBack,expression:"showBack"}],staticClass:"address-back",attrs:{src:"https://img1.haoshiqi.net/miniapp/more_85508a3b09.png"},on:{click:t.goBack}}),i("span",{staticClass:"city-label sendto"},[t._v("配送至")]),i("img",{staticClass:"close",attrs:{src:"https://img1.haoshiqi.net/miniapp/delete_4d67965d24.png"},on:{click:t.onCityView}})]),i("swiper",{ref:"swipe",staticClass:"city-type",attrs:{"default-index":t.swipeIndex,"show-indicators":!1,auto:0},on:{change:t.onChangeSwiperIndex}},[i("swiper-item",[t.addresses.length?i("div",{staticClass:"swipe-item scroll-view"},[i("address-list",{attrs:{"current-city":t.currentCity},on:{selectingNewCity:t.selectingNewCity}}),i("div",{staticClass:"add-bottom"}),i("div",{staticClass:"choose-others",on:{click:t.chooseOthers}},[t._v("选择其他城市")])],1):t._e()]),i("swiper-item",[t.zones.length?i("div",{staticClass:"swipe-item scroll-view"},[i("city-list",{attrs:{"did-show-city-selection":t.didShowCitySelection,"is-select-province":t.isSelectProvince},on:{selectCity:t.selectingNewCity,selectProvince:t.selectProvince}})],1):t._e()])],1)],1)},z=[],q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.addresses,(function(e,s){return i("div",{key:e.id,staticClass:"address-item",on:{click:function(i){return t.onSelecting(e,s)}}},[i("div",{staticClass:"address-item-left"},[e.currentAddress==t.currentCity.currentAddress?[i("img",{staticClass:"address-icon",attrs:{src:"https://img1.haoshiqi.net/miniapp/location_selected_8b4131351a.png"}})]:[i("img",{staticClass:"address-icon",attrs:{src:"https://img1.haoshiqi.net/miniapp/location@3x_a034410ec3.png"}})],i("label",{staticClass:"label-address"},[t._v(t._s(e.currentAddress))])],2)])})),0)},V=[],G={props:{currentCity:Object},data:function(){return{addresses:[]}},computed:{},created:function(){this.addresses=Object(h["a"])(this.$store.state.location.addresses)},methods:{onSelecting:function(t,e){var i=this.$store.state.location.addressInfo,s=i;s.currentAddress!=t.currentAddress&&(this.$store.dispatch("setAddressInfo",t),this.handleAddresses(t,e)),this.$emit("selectingNewCity")},handleAddresses:function(t,e){var i=this.addresses;i.splice(e,1),i.unshift(t),this.addresses=i}}},F=G,H=(i("e0c6"),Object(g["a"])(F,q,V,!1,null,"799b298e",null)),W=H.exports,J=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"city-list"},[i("div",{staticClass:"select-header"},[i("div",{staticClass:"select-title",class:{"no-data":t.isSelectProvince},on:{click:t.cancelSelect}},[t._v("\n      "+t._s(t.currentProvince.currentAddress?t.currentProvince.currentAddress:"请选择")+"\n    ")]),t.currentProvince.currentAddress?i("div",{staticClass:"select-title ",class:{"no-data":!t.isSelectProvince}},[t._v("\n      请选择\n    ")]):t._e()]),t.isSelectProvince?i("div",{staticClass:"scroll-view zone-list"},t._l(t.zones,(function(e){return i("div",{key:e.id,staticClass:"zone-item",on:{click:function(i){return t.selectProvince(e)}}},[e.currentAddress==t.currentProvince.currentAddress?i("img",{staticClass:"select-icon",attrs:{src:"https://img2.haoshiqi.net/item_detail_check@3x.png"}}):t._e(),i("label",{staticClass:"zone-label"},[t._v(t._s(e.currentAddress))])])})),0):i("div",{staticClass:"scroll-view zone-list"},t._l(t.cityList,(function(e){return i("div",{key:e.id,staticClass:"zone-item",on:{click:function(i){return t.selectCity(e)}}},[i("label",{staticClass:"zone-label"},[t._v(t._s(e.city))])])})),0)])},R=[];function K(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function U(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?K(i,!0).forEach((function(e){Object(r["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):K(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Y={},Z={props:{isSelectProvince:{type:Boolean,default:!0},didShowCitySelection:{type:Boolean,default:!1}},data:function(){return{currentProvince:{},cityList:[],currentCity:{}}},computed:U({},Object(p["d"])({zones:function(t){return t.location.zones}})),created:function(){},watch:{didShowCitySelection:function(t){t||(this.currentProvince={})}},methods:{selectProvince:function(t){this.currentProvince=t,this.$emit("selectProvince",!1);var e=t.currentProvinceId+"";Y[e]?this.cityList=Y[e]:this.getCityList(e)},getCityList:function(t){var e=this;this.$api.cityList({provinceId:t},(function(i){var s=i.data.list;Y[t]=s,e.cityList=s}),(function(t){}))},cancelSelect:function(){this.$emit("selectProvince",!0)},selectCity:function(t){this.currentCity=t,this.$store.dispatch("setAddressInfo",{currentProvinceId:this.currentProvince.currentProvinceId,currentAddress:this.currentProvince.currentAddress+" "+t.city,addressId:null,cityId:t.id}),this.$emit("selectCity")}}},Q=Z,X=(i("981d"),Object(g["a"])(Q,J,R,!1,null,"daad5f4c",null)),tt=X.exports;i("2e22");function et(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function it(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?et(i,!0).forEach((function(e){Object(r["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):et(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var st,at={name:"select-city",components:{Swiper:o["d"],SwiperItem:o["e"],AddressList:W,CityList:tt},props:{didShowCitySelection:{type:Boolean,default:!1}},data:function(){return{isSelectProvince:!0,swipeIndex:1,currentCity:{}}},computed:it({},Object(p["d"])({zones:function(t){return t.location.zones},fixedPosition:function(t){return state.location.fixedPosition}}),{showBack:function(){return 1==this.swipeIndex&&!this.addresses.length&&!this.isSelectProvince||0!=this.swipeIndex&&this.addresses.length},addressInfo:function(){return this.$store.state.location.addressInfo},addresses:function(){return this.$store.state.location.addresses}}),created:function(){this.addresses.length&&(this.swipeIndex=0,this.$refs.swipe.prev()),this.setDefaultAddr()},watch:{"addresses.length":function(t,e){this.setDefaultAddr(),t&&(this.swipeIndex=0,this.$refs.swipe.prev())}},methods:{setDefaultAddr:function(){this.currentCity=Object(h["a"])(this.addressInfo)},selectingNewCity:function(t){this.onCityView(),this.$emit("selectingNewCity")},onCityView:function(){this.didShowCitySelection&&(this.isSelectProvince=!0,this.currentCity=Object(h["a"])(this.addressInfo),this.$emit("update:didShowCitySelection",!1),1==this.swipeIndex&&this.addresses.length&&this.$refs.swipe.prev())},chooseOthers:function(){this.$refs.swipe.next()},goBack:function(){this.addresses.length&&this.isSelectProvince&&1==this.swipeIndex?this.$refs.swipe.prev():this.isSelectProvince=!0},onChangeSwiperIndex:function(t){this.swipeIndex=t},selectProvince:function(t){this.isSelectProvince=t}}},nt=at,ct=(i("f040"),Object(g["a"])(nt,M,z,!1,null,"50063ee3",null)),rt=ct.exports;function ot(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function lt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ot(i,!0).forEach((function(e){Object(r["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ot(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var dt={name:"detail2",components:(st={},Object(r["a"])(st,o["d"].name,o["d"]),Object(r["a"])(st,o["e"].name,o["e"]),Object(r["a"])(st,"promotionCard",w),Object(r["a"])(st,L.name,L),Object(r["a"])(st,rt.name,rt),st),mixins:[E],data:function(){return{ratio:1,swiperList:[],merchantInfo:{},timestamp:"",priceObj:{price:"",point:"",marketPrice:""},skuInfo:"",isShowPopup:!1,normSelectTag:0,currentSum:1,maxBuySum:100,skuBtnStatus:{isBtnActive:!0,buyBtnText:"立即购买",cartBtnText:"加入购物车"},attrList:[],skuStocksList:{},skuId:0,currentSkuData:{},smallCurrentSkuData:{},selectedAttrName:[],notSelectedAttrName:"",promotions:[],labels:[],merchantData:{},productId:0,detailHtml:"",showAct:!1,activityPreheat:{},descData:{},proStatus:!1,headerStyle:{backgroundColor:"rgba(255,255,255,0)"},topStatus:!1,didShowCitySelection:!1,isGat:!m["a"].isChannel("guanaitong"),isInit:!0}},computed:lt({},Object(p["d"])({fixedPosition:function(t){return t.location.fixedPosition}}),{currentCity:function(){return Object(h["a"])(this.$store.state.location.addressInfo)},addressInfo:function(){return this.$store.state.location.addressInfo},addresses:function(){return this.$store.state.location.addresses}}),created:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.refresh(),t.next=3,this.$store.dispatch("getZones");case 3:return t.next=5,this.$store.dispatch("getAddresses");case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){this.acticityType&&this.startActivityCountDown(),window.addEventListener("scroll",this.scrollToTop)},beforeDestroy:function(){this.clearCountDown()},methods:lt({},Object(p["b"])(["getGeo"]),{setDefaultAddr:function(){var t=this.addresses.find((function(t){return t.isDefault})),e=this.addressInfo;e.currentAddress!=t.currentAddress&&this.$store.dispatch("setAddressInfo",t)},getGeoLocation:function(){var t=this;this.isInit=!1,this.getGeo({name:"app",success:function(e){t.$store.dispatch("setAddressInfo",t.fixedPosition),t.getDelivery()},fail:function(e){t.$store.dispatch("setAddressInfo",t.fixedPosition),t.getDelivery()},hasLocation:function(){t.addresses.length?t.setDefaultAddr():t.$store.dispatch("setAddressInfo",t.fixedPosition),t.getDelivery()}})},scrollToTop:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.topStatus=t>100},refresh:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$route.query,e=t.id,i=void 0===e?"1299":e;i&&this.getSkuinfotDetail(i)},handleChange:function(t){this.curIndex=t+1},onBtnClick:function(t){var e=t.type;switch(e){case"buyBtn":this.toOrder(this.currentSkuData,this.currentSum),this.setData({isShowPopup:!1});break}},skuDataOnChange:function(t){t.skuid&&this.refresh({id:t.pinactivitiesid})},getSkuinfotDetail:function(t){var e=this;this.$api.getCoupleDetail({pinActivitiesId:t},(function(t){var i=t.data;e.skuId=i.skuId,e.swiperList=i.pics,e.timestamp=t.timestamp,e.merchantInfo={merchantType:i.merchant_type||1,name:i.name,desc:i.description,canDelivery:i.canDelivery||!1,freightInfo:i.freightInfo},e.priceObj={rmb:1,price:Object(v["a"])(i.couplePrice,100),marketPrice:Object(v["a"])(i.market_price,100)},e.promotions=i.merchantInfo.promotions||[],e.labels=i.labels||[];var s={id:i.merchantInfo.id,name:i.merchantInfo.name,logo:i.merchantInfo.logo,province:i.merchantInfo.province,city:i.merchantInfo.city,notice:i.merchantInfo.notice};function a(t,e){var i={};for(var s in t)i[s]=e(t[s],s);return i}e.merchantData=s||{},e.productId=i.product_id||138;var n=a(i.attrDatas||{},(function(t){return{id:t.id,name:t.name,thumbnail:t.thumbnail,price:t.price,priceText:Object(v["a"])(t.price),market_price:t.market_price,left_stock:t.left_stock,skuid:t.id,max_buy_num:t.left_stock,pinactivitiesid:t.pinactivitiesid}}));e.attrList=i.attrKeys||[],e.skuStocksList=n,e.maxBuySum=i.maxCartSkuCnt;var c={priceText:Object(v["a"])(i.couplePrice),price:i.couplePrice};e.smallCurrentSkuData=c;var r=!1,o=i.activityPreheat,d={activityType:o&&o.activityType||0};if(o){var p=o.activityPrice||0;d.price=Object(v["a"])(p).split("."),d.activityStock=o.activityStock||0,d.activityMarketPrice=Object(v["a"])(o.marketPrice),r=!0,t.timestamp>o.startTime&&t.timestamp<=o.endTime?(d.activityCountTip="距离结束还有",d.activityStatus="start"):t.timestamp<=o.startTime?(d.activityCountTip="距离开始还有",d.activityStatus="ready"):(d.activityStatus="end",r=!1),d.rateNumber=100-(parseInt(d.activityStock/o.allStock*100)||0),d.activityPrice=o.activityPrice||0,d.activityStartTimeTip="".concat(Object(h["d"])(o.startTime||0,"M月D日H:F")),d.activityStartTime=o.startTime||0,d.activityEndTime=o.endTime||0}e.showAct=r,e.activityPreheat=d,e.enabled=i.enabled||!1,e.left_stock=i.left_stock||0,e.skuBtnStatus.isBtnActive=!(!e.enabled||!e.left_stock),e.descData={merchant_type:i.merchant_type,title:i.name,pricePrefix:i.pricePrefix,desc:(i.description||"").replace(/[\r\n]/g,""),restriction_amount:i.restriction_amount||0,left_stock:i.left_stock,is_show_stock:i.left_stock<=30&&i.left_stock>=0},r&&"ready"==d.activityStatus?(e.acticityType=1,e.startActivityCountDown()):r&&"start"==d.activityStatus&&(e.acticityType=2,e.startActivityCountDown()),u.a.wechat&&l["a"].setShare({title:i.name,weixin_timeline:{title:i.name},desc:i.description,link:"".concat(location.href),imgUrl:i.thumbnail}),e.isInit&&e.getGeoLocation(),e.getProductDetail()}),(function(t){e.pageError=!0}))},startActivityCountDown:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.acticityType,e=this.activityPreheat,i=this,s=Date.now()-1e3*this.timestamp;this.diffTime=s;var a=1e3*e.activityStartTime+s;this.localStartTime=a;var n=1e3*e.activityEndTime+s;this.localEndTime=n,this.activityCountManager&&this.activityCountManager.clear&&this.activityCountManager.clear(),this.activityCountManager=new y["a"]({times:1e3,dataList:[{}],set:function(){var t=i.localEndTime-Date.now(),e=i.localStartTime-Date.now();t>0||e>0?this.start():this.clear()},callback:function(){var e=i.localEndTime-Date.now(),s=i.localStartTime-Date.now();s>0&&1==t?(i.$set(i.activityPreheat,"activityStatus","ready"),i.$set(i.activityPreheat,"activityCountTip","距离开始还有"),i.$set(i.activityPreheat,"activityTime",Object(f["b"])(s,!0)||0)):s<=0&&1==t?this.clear():e>0&&1!=t?(i.$set(i.activityPreheat,"activityStatus","start"),i.$set(i.activityPreheat,"activityCountTip","距结束还有"),i.$set(i.activityPreheat,"activityTime",Object(f["b"])(e,!0)||0)):e<=0&&1!=t&&this.clear()}})},clearCountDown:function(){this.activityCountManager&&(this.activityCountManager.clear(),this.activityCountManager=null)},goNext:function(t){switch(t){case"back":this.$back();break;case"index":this.$forward("index");break;case"skuSelect":break;case"service":location.href=window.location.origin+"/index.html#service";break;default:break}},goMerchant:function(t){this.$forward("merchant",{id:t})},getProductDetail:function(){var t=this;this.$api.getPointDetaiMore({productId:this.productId,sourceType:4},(function(e){var i=e.data;t.detailHtml=i.graphicDetail||""}),(function(t){}))},goBuyCommit:function(t,e){this.skuBtnStatus.isBtnActive&&(this.isShowPopup=!0,this.normSelectTag=2)},toOrder:function(t,e){if(t.skuid){var i=window.location.origin+"/index.html#order_commit?skuId=".concat(t.skuid,"&amount=").concat(e,"&price=").concat(this.smallCurrentSkuData.price,"&pinActivitiesId=").concat(t.pinactivitiesid,"&orderType=3&buyflag=couple&sourceType=2");location.href=i}},handlePromotion:function(){var t=this.proStatus;this.proStatus=!t},backTop:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},onSelectCity:function(){this.didShowCitySelection=!0},selectingNewCity:function(){this.getDelivery()},getDelivery:function(){var t=this;this.$api.checkDelivery({skuId:this.skuId},(function(e){var i=e.data,s=void 0===i?{}:i,a=s.canDelivery,n=s.freightInfo,c=void 0===n?"":n;t.merchantInfo.canDelivery=a,t.merchantInfo.freightInfo=c}),(function(t){}))}})},ut=dt,vt=(i("426c"),Object(g["a"])(ut,a,n,!1,null,"4336b9be",null));e["default"]=vt.exports},"833a":function(t,e,i){},"876d":function(t,e,i){"use strict";var s=i("a7f3"),a=i.n(s);a.a},9754:function(t,e,i){},"981d":function(t,e,i){"use strict";var s=i("833a"),a=i.n(s);a.a},a7f3:function(t,e,i){},aef6:function(t,e,i){"use strict";var s=i("5ca1"),a=i("9def"),n=i("d2c8"),c="endsWith",r=""[c];s(s.P+s.F*i("5147")(c),"String",{endsWith:function(t){var e=n(this,t,c),i=arguments.length>1?arguments[1]:void 0,s=a(e.length),o=void 0===i?s:Math.min(a(i),s),l=String(t);return r?r.call(e,l,o):e.slice(o-l.length,o)===l}})},b146:function(t,e,i){},b1bc:function(t,e,i){},cd36:function(t,e,i){"use strict";var s=i("b146"),a=i.n(s);a.a},e0c6:function(t,e,i){"use strict";var s=i("b1bc"),a=i.n(s);a.a},e716:function(t,e,i){"use strict";var s=i("56ba"),a=i.n(s);a.a},f040:function(t,e,i){"use strict";var s=i("9754"),a=i.n(s);a.a},f294:function(t,e,i){}}]);